import {Canvas, Meta, Story} from '@storybook/addon-docs';
import {expect} from '@storybook/jest';
import {within} from '@storybook/testing-library';

import {FormikDecorator} from '../../story-utils/decorators';
import AppointmentProduct from './AppointmentProduct';

export const Template = args => <AppointmentProduct {...args} />;

<Meta title="Private API / Appointments / Appointment Product" component={AppointmentProduct} />

<Canvas>
  <Story
    name="Static"
    decorators={[FormikDecorator]}
    play={async ({canvasElement}) => {
      const canvas = within(canvasElement);
      //Ensure the Select Field is rendered
      await expect(canvas.getByRole('combobox')).toBeVisible();
      // Ensure the Text Field is rendered
      await expect(canvas.getByRole('textbox')).toBeVisible();
    }}
    args={{
      header: 'Onderwerp (1/2)',
      namePrefix: 'appointment',
      selectLabel: 'Onderwerp',
      numberLabel: 'Aantal personen',
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>
